<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.roc.demo.modules.generate.mapper.TableColumnMapper">

    <select id="selectDbTableColumnsByName" parameterType="String" resultType="com.roc.demo.modules.generate.domain.TableColumn">
        SELECT
        column_name,
        ( CASE WHEN ( is_nullable = 'no' <![CDATA[ && ]]> column_key != 'PRI' ) THEN 1 ELSE NULL END ) AS isRequired,
        ( CASE WHEN column_key = 'PRI' THEN 1 ELSE 0 END ) AS isPk,
        ordinal_position AS sort,
        column_comment,
        ( CASE WHEN extra = 'auto_increment' THEN 1 ELSE 0 END ) AS isIncrement,
        column_type
        FROM
        information_schema.COLUMNS
        WHERE
        table_schema = ( SELECT DATABASE ( ) )
        AND table_name = (#{tableName})
        ORDER BY
        ordinal_position
    </select>
</mapper>
